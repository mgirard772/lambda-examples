# Overview
This is a basic lambda function that responds with `hello {input}`, with `{input}` being
the message that it sent in the request.

# Makefile
A makefile is included to provide shortcuts to basic commands. 
These shortuts will be used in this readme. To see the actual commands,
review the makefile.

# Local Testing
There are two ways to test a lambda locally: 

1. Start a local version of API gateway and send requests via curl that mimic what you would send
in a production environment. 
2. Invoke the lambda directly using an event that
models what is generated by API Gateway after a request is received.

## API
Build the function and start the local API
```bash
make start-local-api
```

In a separate terminal, send a curl request to the local API. The data sent is stored under
`events/curl-hello.json`
```bash
make test-local-api
```

## Invocation
Build and invoke the lambda with an event. The event is stored under `events/event.json`
```bash
make local-invoke
```

# Deployment
The below make command will build and deploy the function based on the values stored in `samconfig.toml`.
This file is generated by the gen-config.sh file using the sameconfig-template.toml file.
To set the StageName, set StageName before the make command. The config is generated with
each call to the deploy target.

```bash
StageName=test make deploy
```

# Remote Testing
Once the function has been deployed you can test the remote API gateway.
The `deploy` command will output the endpoint of the deployed function.

```commandline
Key                 HelloWorldApi                                                                                                                                                          
Description         API Gateway endpoint URL for Prod stage for Hello World function                                                                                                       
Value               https://du4d63evy9.execute-api.us-east-1.amazonaws.com/matt/hello  
```

Before calling the API, you need to get the API key for the endpoint from the AWS console.


# Cleanup
To delete the stack, use the following make command
```bash
make delete
```